[gd_scene load_steps=13 format=3 uid="uid://ci61hs1ppmrbb"]

[ext_resource type="Script" path="res://scripts/game.gd" id="1_8s3ah"]
[ext_resource type="Script" path="res://scripts/command_processor.gd" id="2_1t0v8"]
[ext_resource type="Script" path="res://scripts/player.gd" id="2_2kw4x"]
[ext_resource type="PackedScene" uid="uid://boo6ilnbvv3v" path="res://scenes/room.tscn" id="3_4jirj"]
[ext_resource type="FontFile" uid="uid://2c4lklsj37yx" path="res://fonts/Xanmono.ttf" id="3_k8pxv"]
[ext_resource type="Script" path="res://scripts/room_manager.gd" id="3_kjrjv"]
[ext_resource type="Script" path="res://scripts/input.gd" id="4_j06qb"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_nxl4y"]
bg_color = Color(0.118581, 0.118581, 0.118581, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_v4cue"]
bg_color = Color(0.176471, 0.176471, 0.176471, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ebuqv"]
bg_color = Color(0.313726, 0.313726, 0.313726, 1)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_cx0ev"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_p1nom"]

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_8s3ah")

[node name="Player" type="Node" parent="."]
script = ExtResource("2_2kw4x")

[node name="CommandProcessor" type="Node" parent="."]
script = ExtResource("2_1t0v8")

[node name="RoomManager" type="Node" parent="."]
script = ExtResource("3_kjrjv")

[node name="ShedRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = 1294.0
offset_top = -262.0
offset_right = 1694.0
offset_bottom = -33.0
room_name = "a shed"
room_description = "An old, weathered structure at the edge of town, filled with 
farming tools and supplies. There is a door to the inn and some storage crates to the west."

[node name="BackOfInnRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = 811.0
offset_top = -270.0
offset_right = 1267.0
offset_bottom = -20.0
room_name = "the back of the inn"
room_description = "A quieter, more secluded area, used as storage for the inn. There is a door to the north that leads to the inn, and a path that goes to the village square."

[node name="InnsKitchenRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = 803.0
offset_top = -577.0
offset_right = 1259.0
offset_bottom = -285.0
room_name = "the inn's kitchen"
room_description = "The heart of the inn. The cook isn't anuwhere to be found - the room is empty, byt pots  simmer, pans sizzle, and aromas of delicious food fill the air. There is a door on the south wall that seems to go outside, and a door to the north back to the inn proper."

[node name="InnRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = 815.0
offset_top = -884.0
offset_right = 1271.0
offset_bottom = -592.0
room_name = "the inn"
room_description = "Warm and inviting, the inn boasts a roaring fireplace, long wooden tables, and drunk patrons chugging local ale. The inkeeper is standing behind the bar, waiting to serve customers. The is a door to the kitchen to the south, and a door back to the village square to the west."

[node name="InnDoorRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = 332.0
offset_top = -880.0
offset_right = 788.0
offset_bottom = -714.0
room_name = "the inn door"
room_description = "A creaky wooden entrance to the inn, filled with  laughter and clinking glasses. A sign outside says \"The Happy Chungus\""

[node name="VillageSquareRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = -160.0
offset_top = -884.0
offset_right = 296.0
offset_bottom = -676.0
room_name = "the village square"
room_description = "The main square of the village, lined with quaint houses. To the south is the shed and back of the inn. The main inn door is to the east, and there is a field to the west."

[node name="FieldRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = -673.0
offset_top = -882.0
offset_right = -217.0
offset_bottom = -732.0
room_name = "a field"
room_description = "A vast expanse of open land next to the village. The village is back to the east."

[node name="TownGateRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = -171.0
offset_top = -1173.0
offset_right = 285.0
offset_bottom = -923.0
room_name = "the town gate"
room_description = "The main entrance to the village, guarded by towering stone walls. It leads out to the forest to the north. A guard stands nearby a sturdy wooden gate watching everyone who comes by. The village is back toward the south."

[node name="ForestRoom" parent="RoomManager" instance=ExtResource("3_4jirj")]
offset_left = -166.0
offset_top = -1498.0
offset_right = 290.0
offset_bottom = -1227.0
room_name = "the forest"
room_description = "A dense, mysterious woodland filled with ancient trees and  hidden paths. Whispers of adventure echo through its depths. But... Congratulations! You've made it out of the town... Your journey may continue in the future!"

[node name="Background" type="PanelContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_nxl4y")

[node name="MarginContainer" type="MarginContainer" parent="Background"]
layout_mode = 2
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="Rows" type="VBoxContainer" parent="Background/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 20

[node name="GameInfo" type="PanelContainer" parent="Background/MarginContainer/Rows"]
layout_mode = 2
size_flags_vertical = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_v4cue")

[node name="Scroll" type="ScrollContainer" parent="Background/MarginContainer/Rows/GameInfo"]
layout_mode = 2
horizontal_scroll_mode = 0

[node name="HistoryRows" type="VBoxContainer" parent="Background/MarginContainer/Rows/GameInfo/Scroll"]
layout_mode = 2
theme_override_constants/separation = 20

[node name="InputArea" type="PanelContainer" parent="Background/MarginContainer/Rows"]
custom_minimum_size = Vector2(0, 60)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_ebuqv")

[node name="HBoxContainer" type="HBoxContainer" parent="Background/MarginContainer/Rows/InputArea"]
layout_mode = 2

[node name="Caret" type="Label" parent="Background/MarginContainer/Rows/InputArea/HBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("3_k8pxv")
theme_override_font_sizes/font_size = 24
text = " > "

[node name="Input" type="LineEdit" parent="Background/MarginContainer/Rows/InputArea/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_fonts/font = ExtResource("3_k8pxv")
theme_override_font_sizes/font_size = 24
theme_override_styles/focus = SubResource("StyleBoxEmpty_cx0ev")
theme_override_styles/normal = SubResource("StyleBoxEmpty_p1nom")
max_length = 36
script = ExtResource("4_j06qb")

[connection signal="text_submitted" from="Background/MarginContainer/Rows/InputArea/HBoxContainer/Input" to="." method="_on_input_text_submitted"]
[connection signal="text_submitted" from="Background/MarginContainer/Rows/InputArea/HBoxContainer/Input" to="Background/MarginContainer/Rows/InputArea/HBoxContainer/Input" method="_on_text_submitted"]
